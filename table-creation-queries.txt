CREATE TABLE Suppliers (
    supplier_id         NUMBER PRIMARY KEY,
    supplier_name       VARCHAR2(255) NOT NULL,
    supplier_email      VARCHAR2(255),         
    supplier_address    VARCHAR2(255),
    password            VARCHAR2(255)         
);


CREATE TABLE Products (
    product_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    supplier_id NUMBER NOT NULL,
    product_name VARCHAR2(255) NOT NULL,
    product_category VARCHAR2(100),
    price NUMBER(10,2) NOT NULL,
    available_stock NUMBER NOT NULL,
    product_image BLOB, 
    FOREIGN KEY (supplier_id) REFERENCES Suppliers(supplier_id) ON DELETE CASCADE
);

CREATE TABLE Customers (
    customer_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    full_name VARCHAR2(255) NOT NULL,
    customer_email VARCHAR2(255) UNIQUE NOT NULL,
    phone VARCHAR2(20),
    customer_address VARCHAR2(500),
    password VARCHAR2(255) NOT NULL
);

CREATE TABLE Orders (
    order_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    customer_id NUMBER NOT NULL,
    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    total_amount NUMBER(10,2) NOT NULL,
    status VARCHAR2(50) DEFAULT 'Pending',
    FOREIGN KEY (customer_id) REFERENCES Customers(customer_id) ON DELETE CASCADE
);

CREATE TABLE Order_Items (
    order_item_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    order_id NUMBER NOT NULL,
    product_id NUMBER NOT NULL,
    quantity NUMBER NOT NULL,
    subtotal NUMBER(10,2) NOT NULL,
    FOREIGN KEY (order_id) REFERENCES Orders(order_id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES Products(product_id) ON DELETE CASCADE
);

CREATE TABLE Payments (
    payment_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    order_id NUMBER NOT NULL,
    customer_id NUMBER NOT NULL,
    payment_date DATE DEFAULT SYSDATE,
    payment_method VARCHAR2(50) NOT NULL,
    amount NUMBER(10,2) NOT NULL,
    status VARCHAR2(50) DEFAULT 'Pending',
    FOREIGN KEY (order_id) REFERENCES Orders(order_id) ON DELETE CASCADE,
    FOREIGN KEY (customer_id) REFERENCES Customers(customer_id) ON DELETE CASCADE
);

CREATE TABLE Delivery (
    delivery_id     NUMBER PRIMARY KEY,
    order_id        NUMBER,
    delivery_date   DATE,
    delivery_status VARCHAR2(50) DEFAULT 'In Progress',
    FOREIGN KEY (order_id) REFERENCES Orders(order_id) ON DELETE CASCADE
);